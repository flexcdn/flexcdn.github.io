<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<div id="locatorwarp">
    <div id="locatorheadwarp">
        <div class="locatorheadwarpin">
            <div class="locatorheadcol1"><img alt="KnowDengue_element_1" class="locatorheadpinimg" src="https://flexcdn.github.io/knowdengueth/pin_locator.png" /></div>

            <div class="locatorheadcol2">
                <div class="locatorheadcol2top">สถานพยาบาลที่สามารถเข้ารับวัคซีนไข้เลือดออก</div>

                <div class="locatorheadcol2bottom">ถึงเวลาเพิ่มเกราะป้องกันด้วยการฉีดวัคซีนไข้เลือดออก</div>
            </div>

            <div class="knowclearall">&nbsp;</div>
        </div>
    </div>
    <!-- /locatorheadwarp -->

    <div id="locatorshowadress">
        <div class="locatorshowadress-header">
            <svg
                class="locatorshowadress-mapbuttonpin"
                data-arp-injected="true"
                fill="#c12b2c"
                height="30px"
                id="Capa_1"
                version="1.1"
                viewbox="0 0 297 297"
                width="30px"
                xml:space="preserve"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
            >
                <g>
                    <path
                        d="M148.5,0C87.43,0,37.747,49.703,37.747,110.797c0,91.026,99.729,179.905,103.976,183.645   c1.936,1.705,4.356,2.559,6.777,2.559c2.421,0,4.841-0.853,6.778-2.559c4.245-3.739,103.975-92.618,103.975-183.645   C259.253,49.703,209.57,0,148.5,0z M148.5,272.689c-22.049-21.366-90.243-93.029-90.243-161.892   c0-49.784,40.483-90.287,90.243-90.287s90.243,40.503,90.243,90.287C238.743,179.659,170.549,251.322,148.5,272.689z"
                    ></path>
                    <path
                        d="M148.5,59.183c-28.273,0-51.274,23.154-51.274,51.614c0,28.461,23.001,51.614,51.274,51.614   c28.273,0,51.274-23.153,51.274-51.614C199.774,82.337,176.773,59.183,148.5,59.183z M148.5,141.901   c-16.964,0-30.765-13.953-30.765-31.104c0-17.15,13.801-31.104,30.765-31.104c16.964,0,30.765,13.953,30.765,31.104   C179.265,127.948,165.464,141.901,148.5,141.901z"
                    ></path>
                </g>
            </svg>
            ตอนนี้คุณอยู่ที่
        </div>

        <div class="locatorshowadress-adress" id="current_loc"> &nbsp; </div>

        <div class="knowclearall">&nbsp;</div>
    </div>
    <!-- /locatorshowadress -->

    <div id="locatortooldiv">
        <div id="map" style="display: none;">&nbsp;</div>
        <div class="locatortoollist-defualt -fullwidth" id="locatortoollist">

            <div id="locatortoollist-header">แสดงสถานที่ทั้งหมด</div>

            <div id="locatortoolmap-filtertools">

                <div class="locatortoolmap-box locatortoolmap-box0">
                    <label class="locatortoolmap-label">Sort/จัดเรียง</label>

                    <div class="locatortoolmap-select">
                        <select id="sortcard">
                            <option value="Nearest">Nearest/ใกล้ฉันที่สุด</option>
                            <option value="A-Z">A-Z/ตามชื่อ</option>
                        </select>
                    </div>

                    <div class="knowclearall">&nbsp;</div>
                </div>

                <div class="locatortoolmap-box locatortoolmap-box1">
                    <div class="locatortoolmap-search">
                        <input class="locatortoolmap-searchTerm" id="searchBox" name="q" placeholder="ค้นหาจากชื่อสถานพยาบาล..." type="text" />
                        <button class="locatortoolmap-searchButton" id="searchBtn" type="button">
                            <svg
                                data-arp-injected="true"
                                fill="#143858"
                                height="15px"
                                id="Capa_1"
                                version="1.1"
                                viewbox="0 0 183.792 183.792"
                                width="15px"
                                xml:space="preserve"
                                xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink"
                            >
                                <path
                                    d="M54.734,9.053C39.12,18.067,27.95,32.624,23.284,50.039c-4.667,17.415-2.271,35.606,6.743,51.22  c12.023,20.823,34.441,33.759,58.508,33.759c7.599,0,15.139-1.308,22.287-3.818l30.364,52.592l21.65-12.5l-30.359-52.583  c10.255-8.774,17.638-20.411,21.207-33.73c4.666-17.415,2.27-35.605-6.744-51.22C134.918,12.936,112.499,0,88.433,0  C76.645,0,64.992,3.13,54.734,9.053z M125.29,46.259c5.676,9.831,7.184,21.285,4.246,32.25c-2.938,10.965-9.971,20.13-19.802,25.806  c-6.462,3.731-13.793,5.703-21.199,5.703c-15.163,0-29.286-8.146-36.857-21.259c-5.676-9.831-7.184-21.284-4.245-32.25  c2.938-10.965,9.971-20.13,19.802-25.807C73.696,26.972,81.027,25,88.433,25C103.597,25,117.719,33.146,125.29,46.259z"
                                ></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="locatortoolmap-box locatortoolmap-box2">
                    <label class="locatortoolmap-label">ประเภทของสถานพยาบาล</label>

                    <div class="locatortoolmap-select"><select id="hospitaltype"></select></div>

                    <div class="knowclearall">&nbsp;</div>
                </div>


                <div class="locatortoolmap-box locatortoolmap-box3">
                    <label class="locatortoolmap-label">จังหวัด</label>

                    <div class="locatortoolmap-select"><select id="province"></select></div>

                    <div class="knowclearall">&nbsp;</div>
                </div>

                <div class="locatortoolmap-box locatortoolmap-box4">
                    <label class="locatortoolmap-label">อำเภอ/เขต</label>

                    <div class="locatortoolmap-select"><select id="district"></select></div>

                    <div class="knowclearall">&nbsp;</div>
                </div>

                <div class="locatortoolmap-box locatortoolmap-box5">
                    <label class="locatortoolmap-label">แขวง/ตำบล</label>

                    <div class="locatortoolmap-select"><select id="subdistrict"></select></div>

                    <div class="knowclearall">&nbsp;</div>
                </div>

                <div class="knowclearall">&nbsp;</div>
            </div>
            
            <!-- START CARD LOOP -->

            <!-- <div id="hospitalist">&nbsp;</div> -->

            <div class="locatortoollist-div">
                <div id="locatortoollist-shownum">
                    จำนวนสถานที่ <span id="totalHospital">99</span>
                </div>
                <div id="locatortoollist-page">
                    หน้า <span id="selectedPage">1/99</span>
                </div>
                <div class="locatortool-clear"></div>
            </div>
            
            <div id="allhospitals">&nbsp;</div>

            <div class="locatortoollist-div" id="locatortoollist-button">
                <!--
                <button class="locatortoollist-button1" id="btnseemore">ดูเพิ่มเติม</button>
                <button class="locatortoollist-button2" id="btnseeall">ดูทั้งหมด</button>
                -->

                <div class="pagination">
                    <a href="#">&laquo;</a>
                    <a href="#">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4</a>
                    <a href="#">5</a>
                    <a href="#">6</a>
                    <a href="#">&raquo;</a>
                </div>
                <hr>
                <a class="locatortoollist-button1" id="btnseemap" href="/locator" target="_parent">ดูแผนที่</a>
            </div>
        </div>

        <div class="knowclearall">&nbsp;</div>
    </div>
    <!-- /locatortooldiv -->
</div>

<style type="text/css">

@import url("https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");

/* Overwrite Class */
body {
    background-color: #e2f7f2 !important;
}
.footer {
    width: 100% !important;
    background: #fff !important;
    padding-top: 0px !important;
    margin-top: 45px !important;
}
.footer .region-footer {
    max-width: 1360px !important;
    margin: auto !important;
}
.footer__logo {
    padding-top: 20px !important;
}
.footer__top {
    border-top: 0 none transparent !important;
}

/* Global Class */

#locatorwarp {
    background-color: #e2f7f2;
    font-family: "Kanit", sans-serif;
}
#knowmainwarp {
    max-width: 100%;
    margin: auto;
}
.knowclearall {
    float: none;
    clear: both;
    height: 0px;
}
#knowhideelement {
    display: none !important;
    height: 0px !important;
}
.footer__links li:last-child {
    display: list-item !important;
}

/* Header Class */

.locatorheadwarpin {
    max-width: 925px;
    margin: auto;
}
.locatorheadcol2 {
    float: left;
    width: 85%;
    padding: 5px;
    padding-top: 0px;
    padding-left: 10px;
}
#locatorheadwarp {
    padding-top: 20px;
    padding-bottom: 20px;
    margin-bottom: 0px;
}
.locatorheadcol1 {
    float: left;
    width: 15%;
    padding: 5px;
    text-align: center;
}
.locatorheadpinimg {
    width: 100%;
    height: auto;
    max-width: 155px;
}
.locatorheadcol1 {
    /* FIX */
}
.locatorheadcol2 {
    /* FIX */
}
.locatorheadcol2top {
    font-size: 38px;
    height: 60px;
    line-height: 120%;
    overflow: hidden;
    font-weight: 500;
    font-family: "Kanit", sans-serif;
    background-repeat: no-repeat;
    background-position: -7px 100px;
    background-size: 98%;
    color: #143858;
    padding-top: 5px;
    max-width: 750px;
    margin-top: 22px;
    margin-bottom: 0px;
}
.locatorheadcol2bottom {
    font-size: 25.5px;
    line-height: 100%;
    font-family: "Kanit", sans-serif;
    color: #0081a0;
}

/* You Address Class */

#locatorshowadress {
    max-width: 680px;
    width: 100%;
    margin: auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 25px;
}
.locatorshowadress-header {
    float: left;
    padding-right: 15px;
    font-size: 24px;
    font-weight: 400;
    min-width: 190px;
    padding-top: 0px;
}
.locatorshowadress-adress {
    float: left;
    padding-top: 4px;
    max-width: 450px;
}
.locatorshowadress-mapbuttonpin {
    margin-bottom: -7px;
    padding-right: 0px;
}

/* Map Tools Class */

#locatortooldiv {
    max-width: 1170px;
    margin: auto;
}
#locatortoolmap-header {
    font-size: 32px;
    line-height: 120%;
    font-weight: 500;
    padding-bottom: 15px;
    color: #1b374f;
}
#locatortoolmap {
    float: left;
    width: 65%;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 30px;
    position: -webkit-sticky; /* Safari */
    position: sticky;
    top: 0;
    transition: all 0.6s;
}
#locatortoollist {
    float: left;
    width: 30%;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 30px;
    height: auto;
    transition: all 0.6s;
}
.locatortoolmapbox,
#map {
    width: 740px;
    height: 500px;
    width: 100%;
    background: #c2d3dd;
    border: 1px solid #1b374f;
    border-radius: 8px;
    height: 500px;
}
#mapinfowindow > h1 {
    font-size: 28px;
    line-height: 120%;
    font-weight: 500;
    padding-bottom: 10px;
    margin-bottom: 0px;
    color: #1b374f;
    font-family: "Kanit", sans-serif;
}
#mapinfowindow > p {
    color: #1b374f;
    font-family: "Kanit", sans-serif;
    font-size: 16px;
    margin-bottom: 20px;
}
#mapinfowindow {
    min-height: 130px;
    padding: 5px;
    padding-bottom: 25px;
}
#mapinfowindow > a.card__hospital-mapbutton {
    color: #1b374f;
    font-family: "Kanit", sans-serif;
    font-size: 16px;
    font-weight: 400;
    padding-left: 50px;
    background-image: url(https://flexcdn.github.io/knowdengueth/pin_line.png);
    background-size: 30px;
    background-repeat: no-repeat;
    background-position: 15px center;
    border: none !important;
    text-decoration: none !important;
}
#mapinfowindow > a.card__hospital-mapbutton:hover {
    color: #fff;
}
button.gm-ui-hover-effect > span {
    width: 25px !important;
    height: 25px !important;
    margin-top: 10px !important;
    margin-left: -5px !important;
}
.-maphidden {
    width: 0px !important;
    padding: 0px !important;
    overflow: hidden !important;
}

/* Locator Filter Class */

#locatortoollist-header {
    font-size: 32px;
    line-height: 120%;
    font-weight: 500;
    padding-bottom: 15px;
    color: #1b374f;
}
.locatortoollist-div {
    max-width: 1070px;
    margin: auto;
}
#locatortoollist-shownum {
    text-align: left;
    font-size: 24px;
    line-height: 120%;
    font-weight: 500;
    padding-bottom: 15px;
    color: #1b374f;
    float: left;
    width: 50%;
}
#locatortoollist-page {
    float: left;
    width: 50%;
    text-align: right;
    font-size: 24px;
    line-height: 120%;
    font-weight: 500;
    padding-bottom: 15px;
    color: #1b374f;
}
.locatortool-clear {
    float: none !important;
    clear: both !important;
}
#allhospitals {
    max-width: 1070px;
    margin: auto;
}
#allhospitals::after {
    content: "";
    display: block !important;
    float: none !important;
    clear: both !important;
}
.locatortoolmap-search {
    width: 100%;
    position: relative;
    display: flex;
    border-radius: 25px;
    overflow: hidden;
}
.locatortoolmap-searchTerm {
    width: 100%;
    border: 3px solid #c2d3dd;
    background-color: #c2d3dd;
    border-right: none;
    padding: 15px;
    height: 36px;
    border-radius: 5px 0 0 5px;
    outline: none;
    color: #143858;
    font-family: "Kanit", sans-serif;
}
.locatortoolmap-searchTerm:focus {
    color: #0081a0;
}
.locatortoolmap-searchButton {
    width: 60px;
    height: 36px;
    border: 1px solid #c2d3dd;
    background: #c2d3dd;
    text-align: center;
    color: #1b374f;
    border-radius: 0 5px 5px 0;
    cursor: pointer;
    font-size: 20px;
}
select {
    appearance: none;
    outline: 10px #c2d3dd;
    border: 0;
    box-shadow: none;
    flex: 1;
    padding: 0 1em;
    padding-left: 25px;
    font-family: "Kanit", sans-serif;
    background-color: #c2d3dd;
    color: #143858;
    background-image: none;
    cursor: pointer;
}
select::-ms-expand {
    display: none;
}
.locatortoolmap-label {
    float: left;
    width: 25%;
    min-width: 90px;
    padding-top: 5px;
    text-align: right;
    color: #0081a0;
    font-weight: 300;
}
.locatortoolmap-select {
    position: relative;
    display: flex;
    width: 70%;
    height: 35px;
    border-radius: 25px;
    overflow: hidden;
    float: right;
}
.locatortoolmap-select::after {
    content: "\25BC";
    position: absolute;
    top: 0;
    right: 0;
    padding: 7px;
    padding-right: 15px;
    padding-left: 15px;
    background-color: #143858;
    color: #c2d3dd;
    transition: 0.25s all ease;
    pointer-events: none;
}
.locatortoolmap-select:hover::after {
    color: #0081a0;
}
#locatortoolmap-filtertools {
    padding-bottom: 25px;
    padding-top: 25px;
    margin: auto;
    border-bottom: 1px #c2d3dd solid;
    margin-bottom: 35px;
}
.locatortoolmap-box {
    float: left;
    width: 50%;
    max-width: 360px;
    padding: 10px;
    min-height: 60px;
}
.locatortoolmap-box0  > div  > select {
    background-color: #0081a0 !important;
    color: #fff;
}
.locatortoolmap-box1 {
    width: 30%;
    max-width: 345px;
}
.locatortoolmap-box2 {
    width: 33%;
    max-width: 380px;
}
.locatortoolmap-box2 > label {
    width: 25% !important;
    max-width: 100px;
    margin-top: -12px;
}
.locatortoolmap-box2 > div {

}

/* Locator Card Class */

.card__hospital-listing {
    background: #fff;
    color: #1b374f;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    width: 100%;
    cursor: pointer;
    height: auto !important;
    margin-bottom: 20px;
    padding: 15px;
    display: block;
}
.card__hospital-name {
    font-size: 24px;
    line-height: 120%;
    padding-bottom: 15px;
    border-bottom: 1px #ded5d0 solid;
    width: 100%;
    margin-bottom: 15px;
}
.card__hospital-type,
.card__hospital-address,
.card__hospital-hours,
.card__hospital-tel,
.card__hospital-email,
.card__hospital-web,
.card__hospital-line,
.card__hospital-note {
    font-weight: 200;
    line-height: 150%;
    padding-bottom: 10px;
    font-size: 16px;
}
.card__hospital-line,
.card__hospital-email,
.card__hospital-web {
    overflow: hidden !important;
    text-wrap: nowrap !important;
    text-overflow: ellipsis !important;
}
.card__hospital-type,
.card__hospital-address,
.card__hospital-note {
    max-height: 50px;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-bottom: 0px;
    margin-bottom: 10px;
}
.card__hospital-note {
    max-height: 84px;
    padding-top: 10px;
    border-top: 1px #ded5d0 solid;
    width: 100%;
    margin-top: 5px;
}
.card__hospital-icon {
    padding-right: 10px;
    margin-bottom: -5px;
    width: 30px;
}
.card__hospital-link {
    color: #0081a0;
    text-decoration: none;
}
.card__hospital-link:hover {
    color: #63d5b4;
}
.card__hospital-viewonmap {
    float: left;
    width: 80%;
}
.card__hospital-mapbutton {
    background-color: #c2d3dd;
    padding: 7px;
    padding-left: 17px;
    padding-bottom: 9px;
    padding-right: 20px;
    border-radius: 25px;
    color: #1b374f;
    text-decoration: none;
}
.card__hospital-mapbutton:hover {
    text-decoration: none;
    background-color: #0081a0;
    color: #fff;
}
.card__hospital-mapbuttonpin {
    margin-bottom: -5px;
    padding-right: 10px;
    height: 20px;
    width: 30px;
}
.card__hospital-distance {
    float: right;
    max-width: 60px;
    text-align: right;
    font-weight: 100;
    padding-top: 0px;
}
.card__hospital-lastrow {
    float: none;
    clear: both;
    height: auto;
    padding-bottom: 10px;
    padding-top: 25px;
    border-top: 1px #ded5d0 solid;
    width: 100%;
    margin-top: 5px;
}
#locatortoollist-button {
    text-align: center;
    width: 100%;
}
.locatortoollist-button1 {
    background-color: #63d5b4;
    padding: 7px;
    padding-left: 17px;
    padding-bottom: 9px;
    padding-right: 20px;
    border: 0px none transparent;
    border-radius: 25px;
    color: #1b374f;
    font-weight: bold;
    text-decoration: none;
    width: 40%;
    font-size: 18px;
    font-family: "Kanit", sans-serif;
    cursor: pointer;
    display: inline-block;
}
.locatortoollist-button1[disabled] {
    background-color: #333;
    color: #c2d3dd;
}
.locatortoollist-button1:not([disabled]):hover {
    background-color: #0081a0;
    color: #c2d3dd;
}
#btnseemap {
    display: block;
    clear: both;
    margin: auto;
}
.locatortoollist-button2 {
    background-color: #143858;
    padding: 7px;
    padding-left: 17px;
    padding-bottom: 9px;
    padding-right: 20px;
    border: 0px none transparent;
    border-radius: 25px;
    color: #fff;
    font-weight: bold;
    text-decoration: none;
    width: 49%;
    font-size: 18px;
    font-family: "Kanit", sans-serif;
    cursor: pointer;
}
.locatortoollist-button2:hover {
    background-color: #0081a0;
    color: #c2d3dd;
}
.-fullwidth {
    width: 100% !important;
}
.-seeall {
    max-width: 345px !important;
    float: left !important;
    margin-left: 5px !important;
    margin-right: 5px !important;
    margin-bottom: 10px !important;
    height: 445px !important;
}
.-seeall > div.card__hospital-note {
    display: none !important;
}
.-seeall > div.card__hospital-name {
    height: 68px !important;
    line-height: 130% !important;
    padding-bottom: 0px !important;
    overflow: hidden !important;
    text-wrap: wrap !important;
    text-overflow: ellipsis !important;
}
.-seeall > div.card__hospital-line,
.-seeall > div.card__hospital-email {
}
.-seeallbtn {
    float: none !important;
    clear: both !important;
    padding-top: 20px !important;
}
.pagination {
    display: block;
    clear: both;
    width: auto;
    text-align: center;
    margin-bottom: 50px;
    margin-top: 35px;
}

.pagination a {
  color: #1b374f;
  padding: 8px 16px;
  text-decoration: none;
  transition: background-color .3s;
  border: 1px solid #c2d3dd;
  margin: 0 4px;
}
.pagination a:hover {
    background-color: #0081a0;
    color: #c2d3dd;
}
.pagination a.active {
    background-color: #63d5b4;
    color: #1b374f;
    font-weight: bold;
    border: 1px solid #63d5b4;
}

@media (max-width: 1345px) {
    #locatortoolmap-filtertools {
        padding-top: 0px !important;
    }
    .locatortoolmap-box1 {

    }
    .locatortoolmap-select {
        width: 100% !important;
    }
    .locatortoolmap-label {
        text-align: left;
        width: 100% !important;
    }
}

@media (max-width: 1080px) {
    #locatortoolmap {
        width: 57% !important;
    }
    #locatortoollist {
        width: 42% !important;
    }
}

@media (max-width: 935px) {
    .locatorheadcol2top {
        height: auto;
    }
}

@media (max-width: 767px) {
    .locatorheadcol2top {
        font-size: 28px !important;
        height: auto !important;
        line-height: 105% !important;
        padding-bottom: 10px !important;
    }
    #locatortoolmap {
        width: 100% !important;
        float: none !important;
        position: static !important;
    }
    #locatortoolmap-filtertools {
        max-width: 360px;
        margin: auto;
    }
    #locatortoollist {
        width: 100% !important;
        float: none !important;
        position: static !important;
    }
    #locatortoolmap-filtertools > div.locatortoolmap-box {
        float: none !important;
        width: 100% !important;
        max-width: 100% !important;
    }
}

@media (max-width: 481px) {
    #locatorshowadress > div.locatorshowadress-header {
        width: 100% !important;
        text-align: center !important;
    }
    #current_loc {
        width: 100% !important;
        padding-top: 15px !important;
    }
}

</style>

<!-- JS FOR DEMO -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXaXYED_MB0fTuA8XRYNno82ImliWEFL0&loading=async&callback=initMap&v=weekly" defer></script>
<script>
    
    
    var map = null;
    var markers = [];
    const iconurl = "https://flexcdn.github.io/knowdengueth/pin_locator_sml3.png";
    var currentPage = 1;

    const resetDropdown = (name) => {
        while (document.getElementById(name).options.length) {
            document.getElementById(name).remove(0);
        }
        document.getElementById(name).disabled = true;
    };
    const createOption = (val, text) => {
        let el = document.createElement("OPTION");
        el.value = val;
        el.text = text;
        return el;
    };
    const h = (node) => {
        if (typeof node === "string" || typeof node === "number") {
            return document.createTextNode(node);
        }

        let $el = null;
        if (node.type == "svg" || node.type == "path" || node.type == "g") {
            $el = document.createElementNS("http://www.w3.org/2000/svg", node.type);
        } else {
            $el = document.createElement(node.type);
        }
        if (node.attrs) {
            for (const [k, v] of Object.entries(node.attrs)) {
                $el.setAttribute(k, v);
            }
        }

        if (node.events) {
            for (const event of node.events) {
                $el.addEventListener(event[0], event[1]);
            }
        }

        if (node.children) {
            for (const child of node.children) {
                $el.appendChild(h(child));
            }
        }
        return $el;
    };

    const renderCard = (el, val) => {
        const html = h({
            type: "div",
            attrs: {
                class: "card card__hospital-listing" + (el.id == "allhospitals" ? " -seeall" : ""),
                id: "hos_" + val.hospitalid,
            },
            events: [
                [
                    "click",
                    (e) => {
                        window.location.href = "./?q=" + encodeURI(val.hospitalname);
                    },
                ],
            ],
            children: [
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-name",
                    },
                    children: [val.hospitalname],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-type",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 24 24",
                                fill: "#0081a0",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        d:
                                            "M3 21H2C2 21.5523 2.44772 22 3 22V21ZM21 21V22C21.5523 22 22 21.5523 22 21H21ZM6 6C5.44772 6 5 6.44772 5 7C5 7.55228 5.44772 8 6 8V6ZM7 8C7.55228 8 8 7.55228 8 7C8 6.44772 7.55228 6 7 6V8ZM11 6C10.4477 6 10 6.44772 10 7C10 7.55228 10.4477 8 11 8V6ZM12 8C12.5523 8 13 7.55228 13 7C13 6.44772 12.5523 6 12 6V8ZM6 9C5.44772 9 5 9.44772 5 10C5 10.5523 5.44772 11 6 11V9ZM7 11C7.55228 11 8 10.5523 8 10C8 9.44772 7.55228 9 7 9V11ZM11 9C10.4477 9 10 9.44772 10 10C10 10.5523 10.4477 11 11 11V9ZM12 11C12.5523 11 13 10.5523 13 10C13 9.44772 12.5523 9 12 9V11ZM6 12C5.44772 12 5 12.4477 5 13C5 13.5523 5.44772 14 6 14V12ZM7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12V14ZM11 12C10.4477 12 10 12.4477 10 13C10 13.5523 10.4477 14 11 14V12ZM12 14C12.5523 14 13 13.5523 13 13C13 12.4477 12.5523 12 12 12V14ZM11 21V22H12V21H11ZM7 21H6V22H7V21ZM18 10C17.4477 10 17 10.4477 17 11C17 11.5523 17.4477 12 18 12V10ZM18.01 12C18.5623 12 19.01 11.5523 19.01 11C19.01 10.4477 18.5623 10 18.01 10V12ZM18 13C17.4477 13 17 13.4477 17 14C17 14.5523 17.4477 15 18 15V13ZM18.01 15C18.5623 15 19.01 14.5523 19.01 14C19.01 13.4477 18.5623 13 18.01 13V15ZM18 16C17.4477 16 17 16.4477 17 17C17 17.5523 17.4477 18 18 18V16ZM18.01 18C18.5623 18 19.01 17.5523 19.01 17C19.01 16.4477 18.5623 16 18.01 16V18ZM20.891 7.54601L20 8L20.891 7.54601ZM20.454 7.10899L20 8L20.454 7.10899ZM14.454 3.10899L14 4L14.454 3.10899ZM14.891 3.54601L14 4L14.891 3.54601ZM3.10899 3.54601L4 4L3.10899 3.54601ZM3.54601 3.10899L4 4L3.54601 3.10899ZM2 4.6V21H4V4.6H2ZM4.6 4H13.4V2H4.6V4ZM14 4.6V7H16V4.6H14ZM14 7V21H16V7H14ZM3 22H15V20H3V22ZM15 22H21V20H15V22ZM20 8.6V21H22V8.6H20ZM15 8H19.4V6H15V8ZM6 8H7V6H6V8ZM11 8H12V6H11V8ZM6 11H7V9H6V11ZM11 11H12V9H11V11ZM6 14H7V12H6V14ZM11 14H12V12H11V14ZM10 18V21H12V18H10ZM11 20H7V22H11V20ZM8 21V18H6V21H8ZM9 17C9.55228 17 10 17.4477 10 18H12C12 16.3431 10.6569 15 9 15V17ZM9 15C7.34315 15 6 16.3431 6 18H8C8 17.4477 8.44772 17 9 17V15ZM18 12H18.01V10H18V12ZM18 15H18.01V13H18V15ZM18 18H18.01V16H18V18ZM22 8.6C22 8.33647 22.0008 8.07869 21.9831 7.86177C21.9644 7.63318 21.9203 7.36344 21.782 7.09202L20 8C19.9707 7.94249 19.9811 7.91972 19.9897 8.02463C19.9992 8.14122 20 8.30347 20 8.6H22ZM19.4 8C19.6965 8 19.8588 8.00078 19.9754 8.0103C20.0803 8.01887 20.0575 8.0293 20 8L20.908 6.21799C20.6366 6.07969 20.3668 6.03562 20.1382 6.01695C19.9213 5.99922 19.6635 6 19.4 6V8ZM21.782 7.09202C21.5903 6.7157 21.2843 6.40973 20.908 6.21799L20 8L21.782 7.09202ZM13.4 4C13.6965 4 13.8588 4.00078 13.9754 4.0103C14.0803 4.01887 14.0575 4.0293 14 4L14.908 2.21799C14.6366 2.07969 14.3668 2.03562 14.1382 2.01695C13.9213 1.99922 13.6635 2 13.4 2V4ZM16 4.6C16 4.33647 16.0008 4.07869 15.9831 3.86177C15.9644 3.63318 15.9203 3.36344 15.782 3.09202L14 4C13.9707 3.94249 13.9811 3.91972 13.9897 4.02463C13.9992 4.14122 14 4.30347 14 4.6H16ZM14 4L15.782 3.09202C15.5903 2.7157 15.2843 2.40973 14.908 2.21799L14 4ZM4 4.6C4 4.30347 4.00078 4.14122 4.0103 4.02463C4.01887 3.91972 4.0293 3.94249 4 4L2.21799 3.09202C2.07969 3.36344 2.03562 3.63318 2.01695 3.86177C1.99922 4.07869 2 4.33647 2 4.6H4ZM4.6 2C4.33647 2 4.07869 1.99922 3.86177 2.01695C3.63318 2.03562 3.36344 2.07969 3.09202 2.21799L4 4C3.94249 4.0293 3.91972 4.01887 4.02463 4.0103C4.14122 4.00078 4.30347 4 4.6 4V2ZM4 4L3.09202 2.21799C2.71569 2.40973 2.40973 2.71569 2.21799 3.09202L4 4Z",
                                        fill: "#0081a0",
                                    },
                                },
                            ],
                        },
                        "โรงพยาบาลเอกชน",
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-address",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 24 24",
                                fill: "#0081a0",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        d:
                                            "M3 21H2C2 21.5523 2.44772 22 3 22V21ZM21 21V22C21.5523 22 22 21.5523 22 21H21ZM6 6C5.44772 6 5 6.44772 5 7C5 7.55228 5.44772 8 6 8V6ZM7 8C7.55228 8 8 7.55228 8 7C8 6.44772 7.55228 6 7 6V8ZM11 6C10.4477 6 10 6.44772 10 7C10 7.55228 10.4477 8 11 8V6ZM12 8C12.5523 8 13 7.55228 13 7C13 6.44772 12.5523 6 12 6V8ZM6 9C5.44772 9 5 9.44772 5 10C5 10.5523 5.44772 11 6 11V9ZM7 11C7.55228 11 8 10.5523 8 10C8 9.44772 7.55228 9 7 9V11ZM11 9C10.4477 9 10 9.44772 10 10C10 10.5523 10.4477 11 11 11V9ZM12 11C12.5523 11 13 10.5523 13 10C13 9.44772 12.5523 9 12 9V11ZM6 12C5.44772 12 5 12.4477 5 13C5 13.5523 5.44772 14 6 14V12ZM7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12V14ZM11 12C10.4477 12 10 12.4477 10 13C10 13.5523 10.4477 14 11 14V12ZM12 14C12.5523 14 13 13.5523 13 13C13 12.4477 12.5523 12 12 12V14ZM11 21V22H12V21H11ZM7 21H6V22H7V21ZM18 10C17.4477 10 17 10.4477 17 11C17 11.5523 17.4477 12 18 12V10ZM18.01 12C18.5623 12 19.01 11.5523 19.01 11C19.01 10.4477 18.5623 10 18.01 10V12ZM18 13C17.4477 13 17 13.4477 17 14C17 14.5523 17.4477 15 18 15V13ZM18.01 15C18.5623 15 19.01 14.5523 19.01 14C19.01 13.4477 18.5623 13 18.01 13V15ZM18 16C17.4477 16 17 16.4477 17 17C17 17.5523 17.4477 18 18 18V16ZM18.01 18C18.5623 18 19.01 17.5523 19.01 17C19.01 16.4477 18.5623 16 18.01 16V18ZM20.891 7.54601L20 8L20.891 7.54601ZM20.454 7.10899L20 8L20.454 7.10899ZM14.454 3.10899L14 4L14.454 3.10899ZM14.891 3.54601L14 4L14.891 3.54601ZM3.10899 3.54601L4 4L3.10899 3.54601ZM3.54601 3.10899L4 4L3.54601 3.10899ZM2 4.6V21H4V4.6H2ZM4.6 4H13.4V2H4.6V4ZM14 4.6V7H16V4.6H14ZM14 7V21H16V7H14ZM3 22H15V20H3V22ZM15 22H21V20H15V22ZM20 8.6V21H22V8.6H20ZM15 8H19.4V6H15V8ZM6 8H7V6H6V8ZM11 8H12V6H11V8ZM6 11H7V9H6V11ZM11 11H12V9H11V11ZM6 14H7V12H6V14ZM11 14H12V12H11V14ZM10 18V21H12V18H10ZM11 20H7V22H11V20ZM8 21V18H6V21H8ZM9 17C9.55228 17 10 17.4477 10 18H12C12 16.3431 10.6569 15 9 15V17ZM9 15C7.34315 15 6 16.3431 6 18H8C8 17.4477 8.44772 17 9 17V15ZM18 12H18.01V10H18V12ZM18 15H18.01V13H18V15ZM18 18H18.01V16H18V18ZM22 8.6C22 8.33647 22.0008 8.07869 21.9831 7.86177C21.9644 7.63318 21.9203 7.36344 21.782 7.09202L20 8C19.9707 7.94249 19.9811 7.91972 19.9897 8.02463C19.9992 8.14122 20 8.30347 20 8.6H22ZM19.4 8C19.6965 8 19.8588 8.00078 19.9754 8.0103C20.0803 8.01887 20.0575 8.0293 20 8L20.908 6.21799C20.6366 6.07969 20.3668 6.03562 20.1382 6.01695C19.9213 5.99922 19.6635 6 19.4 6V8ZM21.782 7.09202C21.5903 6.7157 21.2843 6.40973 20.908 6.21799L20 8L21.782 7.09202ZM13.4 4C13.6965 4 13.8588 4.00078 13.9754 4.0103C14.0803 4.01887 14.0575 4.0293 14 4L14.908 2.21799C14.6366 2.07969 14.3668 2.03562 14.1382 2.01695C13.9213 1.99922 13.6635 2 13.4 2V4ZM16 4.6C16 4.33647 16.0008 4.07869 15.9831 3.86177C15.9644 3.63318 15.9203 3.36344 15.782 3.09202L14 4C13.9707 3.94249 13.9811 3.91972 13.9897 4.02463C13.9992 4.14122 14 4.30347 14 4.6H16ZM14 4L15.782 3.09202C15.5903 2.7157 15.2843 2.40973 14.908 2.21799L14 4ZM4 4.6C4 4.30347 4.00078 4.14122 4.0103 4.02463C4.01887 3.91972 4.0293 3.94249 4 4L2.21799 3.09202C2.07969 3.36344 2.03562 3.63318 2.01695 3.86177C1.99922 4.07869 2 4.33647 2 4.6H4ZM4.6 2C4.33647 2 4.07869 1.99922 3.86177 2.01695C3.63318 2.03562 3.36344 2.07969 3.09202 2.21799L4 4C3.94249 4.0293 3.91972 4.01887 4.02463 4.0103C4.14122 4.00078 4.30347 4 4.6 4V2ZM4 4L3.09202 2.21799C2.71569 2.40973 2.40973 2.71569 2.21799 3.09202L4 4Z",
                                        fill: "#0081a0",
                                    },
                                },
                            ],
                        },
                        val.address,
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-hours",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                "xmlns:xlink": "http://www.w3.org/1999/xlink",
                                "xmlns:sketch": "http://www.bohemiancoding.com/sketch/ns",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 32 32",
                                version: "1.1",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "g",
                                    attrs: {
                                        stroke: "none",
                                        "stroke-width": 1,
                                        fill: "none",
                                        "fill-rule": "evenodd",
                                        "sketch:type": "MSPage",
                                    },
                                    children: [
                                        {
                                            type: "g",
                                            attrs: {
                                                "sketch:type": "MSLayerGroup",
                                                transform: "translate(-412.000000, -359.000000)",
                                                fill: "#0081a0",
                                            },
                                            children: [
                                                {
                                                    type: "path",
                                                    attrs: {
                                                        d:
                                                            "M438,376 L440,376 L440,374 L438,374 L438,376 Z M428,389 C420.268,389 414,382.732 414,375 C414,367.269 420.268,361 428,361 C435.732,361 442,367.269 442,375 C442,382.732 435.732,389 428,389 L428,389 Z M428,359 C419.163,359 412,366.164 412,375 C412,383.837 419.163,391 428,391 C436.837,391 444,383.837 444,375 C444,366.164 436.837,359 428,359 L428,359 Z M434.076,367.273 L435.46,368.66 L436.844,367.273 L435.46,365.887 L434.076,367.273 L434.076,367.273 Z M433.783,381.778 L435.197,383.192 L436.611,381.778 L435.197,380.364 L433.783,381.778 L433.783,381.778 Z M428,363 C427.448,363 427,363.447 427,364 L427,374.023 L419,374.023 C418.447,374.023 418,374.472 418,375.024 C418,375.576 418.447,376.023 419,376.023 L428,376.023 C428.553,376.023 429,375.576 429,375.024 L429,364 C429,363.447 428.553,363 428,363 L428,363 Z M421.692,367.323 L420.278,365.909 L418.864,367.323 L420.278,368.737 L421.692,367.323 L421.692,367.323 Z M418.733,381.832 L420.117,383.219 L421.501,381.832 L420.117,380.445 L418.733,381.832 L418.733,381.832 Z M427,387 L429,387 L429,385 L427,385 L427,387 Z",
                                                        "sketch:type": "MSShapeGroup",
                                                    },
                                                },
                                            ],
                                        },
                                    ],
                                },
                            ],
                        },
                        val.hours,
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-tel",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 24 24",
                                fill: "#0081a0",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        d:
                                            "M3 5.5C3 14.0604 9.93959 21 18.5 21C18.8862 21 19.2691 20.9859 19.6483 20.9581C20.0834 20.9262 20.3009 20.9103 20.499 20.7963C20.663 20.7019 20.8185 20.5345 20.9007 20.364C21 20.1582 21 19.9181 21 19.438V16.6207C21 16.2169 21 16.015 20.9335 15.842C20.8749 15.6891 20.7795 15.553 20.6559 15.4456C20.516 15.324 20.3262 15.255 19.9468 15.117L16.74 13.9509C16.2985 13.7904 16.0777 13.7101 15.8683 13.7237C15.6836 13.7357 15.5059 13.7988 15.3549 13.9058C15.1837 14.0271 15.0629 14.2285 14.8212 14.6314L14 16C11.3501 14.7999 9.2019 12.6489 8 10L9.36863 9.17882C9.77145 8.93713 9.97286 8.81628 10.0942 8.64506C10.2012 8.49408 10.2643 8.31637 10.2763 8.1317C10.2899 7.92227 10.2096 7.70153 10.0491 7.26005L8.88299 4.05321C8.745 3.67376 8.67601 3.48403 8.55442 3.3441C8.44701 3.22049 8.31089 3.12515 8.15802 3.06645C7.98496 3 7.78308 3 7.37932 3H4.56201C4.08188 3 3.84181 3 3.63598 3.09925C3.4655 3.18146 3.29814 3.33701 3.2037 3.50103C3.08968 3.69907 3.07375 3.91662 3.04189 4.35173C3.01413 4.73086 3 5.11378 3 5.5Z",
                                        stroke: "#0081a0",
                                        "stoke-width": 1,
                                        "stroke-linecap": "round",
                                        "stroke-linejoin": "round",
                                    },
                                },
                            ],
                        },
                        {
                            type: "a",
                            attrs: {
                                href: "tel:" + val.phone,
                                target: "_blank",
                                class: "card__hospital-link",
                            },
                            children: [val.phone],
                        },
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-line",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 24 24",
                                fill: "none",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        "fill-rule": "evenodd",
                                        "chip-rule": "evenodd",
                                        d:
                                            "M12 2C17.5141 2 22 5.6405 22 10.1152C22 11.9059 21.3056 13.5189 19.8565 15.1083H19.8569C17.7589 17.5229 13.0673 20.4642 12 20.914C10.9622 21.3513 11.0824 20.6672 11.1299 20.3969C11.1312 20.3892 11.1325 20.3819 11.1337 20.3749C11.1592 20.2245 11.2765 19.5188 11.2765 19.5188C11.3101 19.2634 11.345 18.8673 11.2441 18.6146C11.1321 18.3363 10.6888 18.1918 10.3632 18.1214C5.55755 17.4864 2 14.1267 2 10.1152C2 5.6405 6.48633 2 12 2ZM9.97218 7.95281H9.2631C9.15766 7.95281 9.07208 8.03839 9.07208 8.14374V12.508C9.07208 12.6135 9.15766 12.699 9.2631 12.699H9.97218C10.0777 12.699 10.1631 12.6135 10.1631 12.508V8.14374C10.1631 8.03839 10.0777 7.95281 9.97218 7.95281ZM8.47184 12.508C8.47184 12.6135 8.38636 12.6989 8.28091 12.6989H5.47142C5.36598 12.6989 5.2805 12.6135 5.2805 12.508V8.14381C5.2805 8.03836 5.36598 7.95288 5.47142 7.95288H6.18069C6.28566 7.95288 6.37152 8.03874 6.37152 8.14381V11.6079H8.28091C8.38589 11.6079 8.47184 11.6938 8.47184 11.7987V12.508ZM15.8637 12.6989H18.6732C18.7787 12.6989 18.8641 12.6135 18.8641 12.508V11.7987C18.8641 11.6938 18.7782 11.6079 18.6732 11.6079H16.7639V10.8715H18.6732C18.7787 10.8715 18.8641 10.786 18.8641 10.6805V9.97128C18.8641 9.8663 18.7782 9.78035 18.6732 9.78035H16.7639V9.0439H18.6732C18.7787 9.0439 18.8641 8.95842 18.8641 8.85297V8.14381C18.8641 8.03874 18.7782 7.95288 18.6732 7.95288H15.8637C15.7583 7.95288 15.6728 8.03836 15.6728 8.14381V12.508C15.6728 12.6135 15.7583 12.6989 15.8637 12.6989ZM14.091 7.95281H14.8001C14.9056 7.95281 14.9911 8.03839 14.9911 8.14374V12.508C14.9911 12.6135 14.9056 12.699 14.8001 12.699H14.0949C14.0776 12.699 14.0609 12.6964 14.045 12.6922L14.0437 12.692L14.0422 12.6916C14.0377 12.6903 14.0333 12.6888 14.029 12.6873L14.023 12.6851C14.0198 12.6839 14.0168 12.6826 14.0136 12.6811C14.0105 12.6797 14.0075 12.6782 14.0045 12.6766C14.0025 12.6757 14.0007 12.6746 13.9988 12.6736C13.9948 12.6713 13.9907 12.6689 13.9868 12.6663L13.9847 12.6648C13.966 12.6521 13.9492 12.6362 13.9354 12.6167L11.9361 9.91675V12.508C11.9361 12.6135 11.8506 12.699 11.7452 12.699H11.036C10.9306 12.699 10.8451 12.6135 10.8451 12.508V8.14374C10.8451 8.03839 10.9306 7.95281 11.036 7.95281H11.7412C11.7435 7.95281 11.7456 7.95309 11.7479 7.95318C11.7513 7.95328 11.7546 7.95337 11.758 7.95375L11.7683 7.95487L11.7764 7.95618L11.7877 7.95862L11.7946 7.9604C11.7985 7.96153 11.8023 7.96274 11.8062 7.96415L11.8124 7.9664C11.8161 7.9679 11.8199 7.96949 11.8235 7.97118L11.8296 7.97418C11.8332 7.97596 11.8367 7.97793 11.8401 7.97999L11.8459 7.98346C11.8495 7.9858 11.8529 7.98805 11.8561 7.9904L11.8613 7.99424C11.8649 7.99714 11.8682 8.00005 11.8716 8.00305L11.8752 8.00633C11.8792 8.01008 11.883 8.01411 11.8867 8.01823L11.8879 8.01964C11.8934 8.02583 11.8986 8.03239 11.9033 8.03932L13.9 10.7359V8.14374C13.9 8.03839 13.9855 7.95281 14.091 7.95281Z",
                                        fill: "#0081a0",
                                    },
                                },
                            ],
                        },
                        {
                            type: "a",
                            attrs: {
                                href: val.linelink,
                                target: "_blank",
                                class: "card__hospital-link",
                            },
                            children: [val.lineid],
                        },
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-email",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                "xmlns:xlink": "http://www.w3.org/1999/xlink",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 512 512",
                                version: "1.1",
                                fill: "#0081a0",
                                "xml:space": "preserve",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "g",
                                    children: [
                                        {
                                            type: "path",
                                            attrs: {
                                                class: "st0",
                                                d:
                                                    "M510.678,112.275c-2.308-11.626-7.463-22.265-14.662-31.054c-1.518-1.915-3.104-3.63-4.823-5.345   c-12.755-12.818-30.657-20.814-50.214-20.814H71.021c-19.557,0-37.395,7.996-50.21,20.814c-1.715,1.715-3.301,3.43-4.823,5.345   C8.785,90.009,3.63,100.649,1.386,112.275C0.464,116.762,0,121.399,0,126.087V385.92c0,9.968,2.114,19.55,5.884,28.203   c3.497,8.26,8.653,15.734,14.926,22.001c1.59,1.586,3.169,3.044,4.892,4.494c12.286,10.175,28.145,16.32,45.319,16.32h369.958   c17.18,0,33.108-6.145,45.323-16.384c1.718-1.386,3.305-2.844,4.891-4.43c6.27-6.267,11.425-13.741,14.994-22.001v-0.064   c3.769-8.653,5.812-18.171,5.812-28.138V126.087C512,121.399,511.543,116.762,510.678,112.275z M46.509,101.571   c6.345-6.338,14.866-10.175,24.512-10.175h369.958c9.646,0,18.242,3.837,24.512,10.175c1.122,1.129,2.179,2.387,3.112,3.637   L274.696,274.203c-5.348,4.687-11.954,7.002-18.696,7.002c-6.674,0-13.276-2.315-18.695-7.002L43.472,105.136   C44.33,103.886,45.387,102.7,46.509,101.571z M36.334,385.92V142.735L176.658,265.15L36.405,387.435   C36.334,386.971,36.334,386.449,36.334,385.92z M440.979,420.597H71.021c-6.281,0-12.158-1.651-17.174-4.552l147.978-128.959   l13.815,12.018c11.561,10.046,26.028,15.134,40.36,15.134c14.406,0,28.872-5.088,40.432-15.134l13.808-12.018l147.92,128.959   C453.137,418.946,447.26,420.597,440.979,420.597z M475.666,385.92c0,0.529,0,1.051-0.068,1.515L335.346,265.221L475.666,142.8   V385.92z",
                                            },
                                        },
                                    ],
                                },
                            ],
                        },
                        {
                            type: "a",
                            attrs: {
                                href: "mailto: " + val.email,
                                target: "_blank",
                                class: "card__hospital-link",
                            },
                            children: [val.email],
                        },
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-web",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 24 24",
                                fill: "#0081a0",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        d:
                                            "M20.501 6.028V6h-.02A10.28 10.28 0 0 0 4.519 6H4.5v.028a10.262 10.262 0 0 0 0 12.944V19h.02a10.28 10.28 0 0 0 15.962 0h.021v-.028a10.262 10.262 0 0 0 0-12.944zM13 6V3.272A4.533 4.533 0 0 1 15.54 6zm2.935 1a16.827 16.827 0 0 1 .853 5H13V7zM12 3.272V6H9.46A4.533 4.533 0 0 1 12 3.272zM12 7v5H8.212a16.827 16.827 0 0 1 .853-5zm-4.787 5H3.226a9.234 9.234 0 0 1 1.792-5h2.984a17.952 17.952 0 0 0-.79 5zm0 1a17.952 17.952 0 0 0 .789 5H5.018a9.234 9.234 0 0 1-1.792-5zm1 0H12v5H9.065a16.827 16.827 0 0 1-.853-5zM12 19v2.728A4.533 4.533 0 0 1 9.46 19zm1 2.728V19h2.54A4.533 4.533 0 0 1 13 21.728zM13 18v-5h3.788a16.827 16.827 0 0 1-.853 5zm4.787-5h3.987a9.234 9.234 0 0 1-1.792 5h-2.984a17.952 17.952 0 0 0 .79-5zm0-1a17.952 17.952 0 0 0-.789-5h2.984a9.234 9.234 0 0 1 1.792 5zm1.352-6h-2.501a8.524 8.524 0 0 0-1.441-2.398A9.306 9.306 0 0 1 19.139 6zM9.803 3.602A8.524 8.524 0 0 0 8.363 6H5.86a9.306 9.306 0 0 1 3.942-2.398zM5.861 19h2.501a8.524 8.524 0 0 0 1.441 2.398A9.306 9.306 0 0 1 5.861 19zm9.336 2.398A8.524 8.524 0 0 0 16.637 19h2.502a9.306 9.306 0 0 1-3.942 2.398z",
                                    },
                                },
                                {
                                    type: "path",
                                    attrs: {
                                        fill: "none",
                                        d: "M0 0h24v24H0z",
                                    },
                                },
                            ],
                        },
                        {
                            type: "a",
                            attrs: {
                                href: val.website,
                                target: "_blank",
                                class: "card__hospital-link",
                            },
                            children: [val.website],
                        },
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-note",
                    },
                    children: [
                        {
                            type: "svg",
                            attrs: {
                                xmlns: "http://www.w3.org/2000/svg",
                                fill: "#0081a0",
                                width: "20px",
                                height: "20px",
                                viewBox: "0 0 1920 1920",
                                "data-arp-injected": true,
                                class: "card__hospital-icon",
                            },
                            children: [
                                {
                                    type: "path",
                                    attrs: {
                                        d:
                                            "m1783.68 1468.235-315.445 315.445v-315.445h315.445Zm-541.327-338.823v112.94h-903.53v-112.94h903.53Zm338.936-338.824V903.53H338.824V790.59h1242.465ZM621.176 0c93.403 0 169.412 76.01 169.412 169.412 0 26.09-6.437 50.484-16.94 72.62L999.98 468.255l-79.962 79.962-226.221-226.334c-22.137 10.504-46.532 16.942-72.622 16.942-93.402 0-169.411-76.01-169.411-169.412C451.765 76.009 527.775 0 621.176 0Zm395.295 225.882v112.942h790.588v1016.47h-451.765v451.765H112.941V338.824h225.883V225.882H0V1920h1421.478c45.176 0 87.755-17.619 119.717-49.581l329.224-329.11c31.962-32.076 49.581-74.655 49.581-119.831V225.882h-903.53Z",
                                        "fill-rule": "evenodd",
                                    },
                                },
                            ],
                        },
                        val.note,
                    ],
                },
                {
                    type: "div",
                    attrs: {
                        class: "card__hospital-lastrow",
                    },
                    children: [
                        {
                            type: "div",
                            attrs: {
                                class: "card__hospital-viewonmap",
                            },
                            children: [
                                {
                                    type: "a",
                                    attrs: {
                                        href: "./?q=" + encodeURI(val.hospitalname),
                                        target: "_blank",
                                        class: "card__hospital-mapbutton",
                                    },
                                    children: [
                                        {
                                            type: "svg",
                                            attrs: {
                                                xmlns: "http://www.w3.org/2000/svg",
                                                "xmlns:xlink": "http://www.w3.org/1999/xlink",
                                                fill: "#1b374f",
                                                width: "20px",
                                                height: "20px",
                                                version: "1.1",
                                                id: "Capa_1",
                                                viewBox: "0 0 297 297",
                                                "xml:space": "preserve",
                                                "data-arp-injected": true,
                                                class: "card__hospital-mapbuttonpin",
                                            },
                                            children: [
                                                {
                                                    type: "g",
                                                    children: [
                                                        {
                                                            type: "path",
                                                            attrs: {
                                                                d:
                                                                    "M148.5,0C87.43,0,37.747,49.703,37.747,110.797c0,91.026,99.729,179.905,103.976,183.645   c1.936,1.705,4.356,2.559,6.777,2.559c2.421,0,4.841-0.853,6.778-2.559c4.245-3.739,103.975-92.618,103.975-183.645   C259.253,49.703,209.57,0,148.5,0z M148.5,272.689c-22.049-21.366-90.243-93.029-90.243-161.892   c0-49.784,40.483-90.287,90.243-90.287s90.243,40.503,90.243,90.287C238.743,179.659,170.549,251.322,148.5,272.689z",
                                                            },
                                                        },
                                                        {
                                                            type: "path",
                                                            attrs: {
                                                                d:
                                                                    "M148.5,59.183c-28.273,0-51.274,23.154-51.274,51.614c0,28.461,23.001,51.614,51.274,51.614   c28.273,0,51.274-23.153,51.274-51.614C199.774,82.337,176.773,59.183,148.5,59.183z M148.5,141.901   c-16.964,0-30.765-13.953-30.765-31.104c0-17.15,13.801-31.104,30.765-31.104c16.964,0,30.765,13.953,30.765,31.104   C179.265,127.948,165.464,141.901,148.5,141.901z",
                                                            },
                                                        },
                                                    ],
                                                },
                                            ],
                                        },
                                        "แผนที่การเดินทาง",
                                    ],
                                },
                            ],
                        },
                        {
                            type: "div",
                            attrs: {
                                class: "card__hospital-distance",
                            },
                            children: [Math.ceil(val.distance) + " km"],
                        },
                        {
                            type: "div",
                            attrs: {
                                class: "knowclearall",
                            },
                        },
                    ],
                },
            ],
        });
        el.appendChild(html);
    };
    
    const getFilterHostpitals = (pos, field, pid, page) => {

        currentPage = page;
        let el = document.getElementById("allhospitals");
        el.innerHTML = "";

        const sort = document.getElementById('sortcard').value;

        fetch("https://knowdengueth.flexsolutions.business/api.php?hospitals&" + field + "=" + pid + "&lat=" + pos.lat + "&lon=" + pos.lng + "&page=" + page + "&sort=" + sort + "&size=30")
            .then((res) => res.json())
            .then((data) => {

                data.data.rows.forEach((val) => {
                    renderCard(el, val);
                });

                document.getElementById('totalHospital').innerHTML = data.data.total;
                document.getElementById('selectedPage').innerHTML = currentPage + "/" + data.data.pages;
                el.innerHTML = "";
                data.data.rows.forEach((val) => {
                    renderCard(el, val);
                });
                const pagecontainer = document.querySelector('div.pagination');
                pagecontainer.innerHTML = '';

                if(currentPage > 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getFilterHostpitals(pos, field, pid, currentPage - 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ "<" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ "<" ]
                    }));
                }

                for (let i = 1; i <= data.data.pages; i++) {
                    if (i == 1 || i == data.data.pages || i >= currentPage - 2 || i <= currentPage + 2) {
                        pagecontainer.appendChild(h({
                            type: "a",
                            attrs: {
                                href: "#",
                                class: (i == currentPage)?"active":""
                            },
                            events: [
                                [
                                    "click",
                                    (e) => {
                                        e.preventDefault();
                                        getFilterHostpitals(pos, field, pid, i);
                                        return false;
                                    },
                                ]
                            ],
                            children: [ i ]
                        }));
                    }
                }


                if(currentPage < data.data.pages - 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getFilterHostpitals(pos, field, pid, currentPage + 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ ">" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ ">" ]
                    }));
                }
            });

        var dd = document.getElementById('sortcard'), ddClone = dd.cloneNode(true);
        ddClone.value = dd.value;
        dd.parentNode.replaceChild(ddClone, dd);

        document.getElementById('sortcard').addEventListener("change", (e) => {
            getFilterHostpitals(pos, field, pid, currentPage);
        });
    };
    const getHostpitals = (pos, page) => {
        currentPage = page;
        let el = document.getElementById("allhospitals");
        el.innerHTML = "";

        const sort = document.getElementById('sortcard').value;
        
        fetch("https://knowdengueth.flexsolutions.business/api.php?hospitals&lat=" + pos.lat + "&lon=" + pos.lng + "&page=" + page + "&sort=" + sort + "&size=30")
            .then((res) => res.json())
            .then((data) => {
                document.getElementById('totalHospital').innerHTML = data.data.total;
                document.getElementById('selectedPage').innerHTML = currentPage + "/" + data.data.pages;
                data.data.rows.forEach((val) => {
                    renderCard(el, val);
                });
                const pagecontainer = document.querySelector('div.pagination');
                pagecontainer.innerHTML = '';

                if(currentPage > 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getHostpitals(pos, currentPage - 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ "<" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ "<" ]
                    }));
                }

                for (let i = 1; i <= data.data.pages; i++) {
                    if (i == 1 || i == data.data.pages || i >= currentPage - 2 || i <= currentPage + 2) {
                        pagecontainer.appendChild(h({
                            type: "a",
                            attrs: {
                                href: "#",
                                class: (i == currentPage)?"active":""
                            },
                            events: [
                                [
                                    "click",
                                    (e) => {
                                        e.preventDefault();
                                        getHostpitals(pos, i);
                                        return false;
                                    },
                                ]
                            ],
                            children: [ i ]
                        }));
                    }
                }


                if(currentPage < data.data.pages - 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getHostpitals(pos, currentPage + 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ ">" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ ">" ]
                    }));
                }
                
            });
        var dd = document.getElementById('sortcard'), ddClone = dd.cloneNode(true);
        ddClone.value = dd.value;
        dd.parentNode.replaceChild(ddClone, dd);

        document.getElementById('sortcard').addEventListener("change", (e) => {
            getHostpitals(pos, currentPage);
        });
    };
    const getTypeHostpitals = (pos, page, type) => {
        currentPage = page;
        let el = document.getElementById("allhospitals");
        el.innerHTML = "";

        const sort = document.getElementById('sortcard').value;
        
        fetch("https://knowdengueth.flexsolutions.business/api.php?hospitals&type=" + type + "&lat=" + pos.lat + "&lon=" + pos.lng + "&page=" + page + "&sort=" + sort + "&size=30")
            .then((res) => res.json())
            .then((data) => {
                document.getElementById('totalHospital').innerHTML = data.data.total;
                document.getElementById('selectedPage').innerHTML = currentPage + "/" + data.data.pages;
                data.data.rows.forEach((val) => {
                    renderCard(el, val);
                });
                const pagecontainer = document.querySelector('div.pagination');
                pagecontainer.innerHTML = '';

                if(currentPage > 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getTypeHostpitals(pos, currentPage - 1, type);
                                    return false;
                                },
                            ],
                        ],
                        children: [ "<" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ "<" ]
                    }));
                }

                for (let i = 1; i <= data.data.pages; i++) {
                    if (i == 1 || i == data.data.pages || i >= currentPage - 2 || i <= currentPage + 2) {
                        pagecontainer.appendChild(h({
                            type: "a",
                            attrs: {
                                href: "#",
                                class: (i == currentPage)?"active":""
                            },
                            events: [
                                [
                                    "click",
                                    (e) => {
                                        e.preventDefault();
                                        getTypeHostpitals(pos, i, type);
                                        return false;
                                    },
                                ]
                            ],
                            children: [ i ]
                        }));
                    }
                }


                if(currentPage < data.data.pages - 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    getTypeHostpitals(pos, currentPage + 1, type);
                                    return false;
                                },
                            ],
                        ],
                        children: [ ">" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ ">" ]
                    }));
                }
            });

        var dd = document.getElementById('sortcard'), ddClone = dd.cloneNode(true);
        ddClone.value = dd.value;
        dd.parentNode.replaceChild(ddClone, dd);

        document.getElementById('sortcard').addEventListener("change", (e) => {
            getTypeHostpitals(pos, currentPage, type);
        });
    };
    const doSearch = (pos, page) => {
        const searchBox = document.getElementById("searchBox");
        if (searchBox.value == "") {
            return;
        }

        currentPage = page;
        let el = document.getElementById("allhospitals");
        el.innerHTML = "";

        const sort = document.getElementById('sortcard').value;

        fetch("https://knowdengueth.flexsolutions.business/api.php?search&q=" + searchBox.value + "&lat=" + pos.lat + "&lon=" + pos.lng + "&page=" + page + "&sort=" + sort + "&size=30")
            .then((res) => res.json())
            .then((data) => {
                document.getElementById('totalHospital').innerHTML = data.data.total;
                document.getElementById('selectedPage').innerHTML = currentPage + "/" + data.data.pages;
                data.data.rows.forEach((val) => {
                    renderCard(el, val);
                });
                const pagecontainer = document.querySelector('div.pagination');
                pagecontainer.innerHTML = '';

                if(currentPage > 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    doSearch(pos, currentPage - 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ "<" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ "<" ]
                    }));
                }

                for (let i = 1; i <= data.data.pages; i++) {
                    if (i == 1 || i == data.data.pages || i >= currentPage - 2 || i <= currentPage + 2) {
                        pagecontainer.appendChild(h({
                            type: "a",
                            attrs: {
                                href: "#",
                                class: (i == currentPage)?"active":""
                            },
                            events: [
                                [
                                    "click",
                                    (e) => {
                                        e.preventDefault();
                                        doSearch(pos, i);
                                        return false;
                                    },
                                ]
                            ],
                            children: [ i ]
                        }));
                    }
                }


                if(currentPage < data.data.pages - 1){
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#"
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    doSearch(pos, currentPage + 1);
                                    return false;
                                },
                            ],
                        ],
                        children: [ ">" ]
                    }));
                }else{
                    pagecontainer.appendChild(h({
                        type: "a",
                        attrs: {
                            href: "#",
                            disabled: true,
                        },
                        events: [
                            [
                                "click",
                                (e) => {
                                    e.preventDefault();
                                    return false;
                                }
                            ]
                        ],
                        children: [ ">" ]
                    }));
                }
            });

        var dd = document.getElementById('sortcard'), ddClone = dd.cloneNode(true);
        ddClone.value = dd.value;
        dd.parentNode.replaceChild(ddClone, dd);

        document.getElementById('sortcard').addEventListener("change", (e) => {
            doSearch(pos, currentPage);
        });
    };

    window.initMap = async () => {
        var featureStyleOptions = {
            strokeColor: "#eaa532",
            strokeOpacity: 1.0,
            strokeWeight: 3.0,
            fillColor: "#eaa532",
            fillOpacity: 0.5,
        };
        map = new google.maps.Map(document.getElementById("map"), {
            zoom: 12,
            disableDefaultUI: true,
            mapId: "7ba7b4dd9a3d916",
        });
        var currentPos = null;
        var geocoder = new google.maps.Geocoder();
        var provinceLayer = map.getFeatureLayer("ADMINISTRATIVE_AREA_LEVEL_1");
        var districtLayer = map.getFeatureLayer("LOCALITY");

        resetDropdown("province");
        resetDropdown("district");
        resetDropdown("subdistrict");

        fetch("https://knowdengueth.flexsolutions.business/api.php?hospitaltypes")
            .then((res) => res.json())
            .then((data) => {
                if (!data.error) {
                    document.getElementById("hospitaltype").appendChild(createOption(0, "สถานพยาบาลทุกประเภท"));
                    data.data.forEach((val) => {
                        document.getElementById("hospitaltype").appendChild(createOption(val.hospitaltype, val.hospitaltype));
                    });
                    document.getElementById("hospitaltype").disabled = false;

                    getTypeHostpitals(currentPos, 1, 0);
                    fetch("https://knowdengueth.flexsolutions.business/api.php?provinces&type=0")
                        .then((res) => res.json())
                        .then((data) => {
                            if (!data.error) {
                                document.getElementById("province").appendChild(createOption(0, "--เลือกจังหวัด--"));
                                data.data.forEach((val) => {
                                    document.getElementById("province").appendChild(createOption(val.provinceid, val.name_th));
                                });
                                document.getElementById("province").disabled = false;
                            }
                        });
                }
            });

        document.getElementById("hospitaltype").addEventListener("change", (e) => {
            resetDropdown("province");
            resetDropdown("district");
            resetDropdown("subdistrict");
            
            getTypeHostpitals(currentPos, 1, e.target.value);
            fetch("https://knowdengueth.flexsolutions.business/api.php?provinces&type=" + e.target.value)
                .then((res) => res.json())
                .then((data) => {
                    if (!data.error) {
                        document.getElementById("province").appendChild(createOption(0, "--เลือกจังหวัด--"));
                        data.data.forEach((val) => {
                            document.getElementById("province").appendChild(createOption(val.provinceid, val.name_th));
                        });
                        document.getElementById("province").disabled = false;
                    }
                });
        });

        document.getElementById("province").addEventListener("change", (ev) => {
            if (ev.target.value == "0") {
                return;
            }

            resetDropdown("district");
            resetDropdown("subdistrict");

            let province = ev.target.options[ev.target.selectedIndex].text;

            map.data.setStyle({});
            markers.forEach((m) => m.setMap(null));

            if (province == "กรุงเทพมหานคร") {
                province = "Bangkok";
            } else {
                province = "จังหวัด" + province;
            }

            geocoder.geocode({ address: province }, function (results, status) {
                provinceLayer.style = (options) => {
                    if (options.feature.placeId == results[0].place_id) {
                        return featureStyleOptions;
                    } else if (province == "Bangkok" && options.feature.placeId == "ChIJ82ENKDJgHTERxw-LhWOFRTY") {
                        return featureStyleOptions;
                    }
                };
                
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    map.fitBounds(results[0].geometry.bounds, 10);
                }

                currentPos = {
                    lat: results[0].geometry.location.lat(),
                    lng: results[0].geometry.location.lng(),
                };

                getFilterHostpitals({ lat: results[0].geometry.location.lat(), lng: results[0].geometry.location.lng() }, "pid", ev.target.value, 1);
            });

            fetch("https://knowdengueth.flexsolutions.business/api.php?districts&pid=" + ev.target.value)
                .then((res) => res.json())
                .then((data) => {
                    if (!data.error) {
                        document.getElementById("district").appendChild(createOption(0, "--เลือกอำเภอ/เขต--"));
                        data.data.forEach((val) => {
                            document.getElementById("district").appendChild(createOption(val.districtid, val.name_th));
                        });
                        document.getElementById("district").disabled = false;
                    }
                });
        });

        document.getElementById("district").addEventListener("change", (ev) => {
            if (ev.target.value == "0") {
                return;
            }

            resetDropdown("subdistrict");

            let district = ev.target.options[ev.target.selectedIndex].text;

            geocoder.geocode({ address: district }, function (results, status) {
                districtLayer.style = (options) => {
                    if (options.feature.placeId == results[0].place_id) {
                        return featureStyleOptions;
                    }
                };

                getFilterHostpitals({ lat: results[0].geometry.location.lat(), lng: results[0].geometry.location.lng() }, "did", ev.target.value, 1);
            });

            fetch("https://knowdengueth.flexsolutions.business/api.php?subdistricts&did=" + ev.target.value)
                .then((res) => res.json())
                .then((data) => {
                    if (!data.error) {
                        document.getElementById("subdistrict").appendChild(createOption(0, "--เลือกตำบล/แขวง--"));
                        data.data.forEach((val) => {
                            document.getElementById("subdistrict").appendChild(createOption(val.subdistrictid, val.name_th));
                        });
                        document.getElementById("subdistrict").disabled = false;
                    }
                });
        });

        document.getElementById("subdistrict").addEventListener("change", (ev) => {
            if (ev.target.value == "0") {
                return;
            }

            let subdistrict = ev.target.options[ev.target.selectedIndex].text;

            subdistrict += " " + document.getElementById("district").options[document.getElementById("district").selectedIndex].text;

            geocoder.geocode({ address: subdistrict }, function (results, status) {
                districtLayer.style = (options) => {
                    if (options.feature.placeId == results[0].place_id) {
                        return featureStyleOptions;
                    }
                };

                getFilterHostpitals({ lat: results[0].geometry.location.lat(), lng: results[0].geometry.location.lng() }, "sid", ev.target.value, 1);
            });
        });

        document.getElementById("searchBtn").addEventListener("click", (e) => {
            doSearch(currentPos, 1);
        });
        document.getElementById("searchBox").addEventListener("keyup", (e) => {
            if (e.keyCode === 13) {
                doSearch(currentPos, 1);
            }
        });

        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                    };
                    currentPos = pos;
                    geocoder
                        .geocode({ location: pos })
                        .then((response) => {
                            document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                        })
                        .catch((e) => window.alert("Geocoder failed due to: " + e));
                    getHostpitals(pos, 1);
                },
                (error) => {
                    geocoder.geocode({ address: "Bangkok" }, function (results, status) {
                        const pos = {
                            lat: results[0].geometry.location.lat(),
                            lng: results[0].geometry.location.lng(),
                        };
                        currentPos = pos;
                        geocoder
                            .geocode({ location: pos })
                            .then((response) => {
                                document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                            })
                            .catch((e) => window.alert("Geocoder failed due to: " + e));
                        getHostpitals(pos, 1);
                    });
                },
                {
                    timeout: 10000,
                    maximumAge: 10000,
                    enableHighAccuracy: true,
                }
            );
        } else {
            geocoder.geocode({ address: "Bangkok" }, function (results, status) {
                const pos = {
                    lat: results[0].geometry.location.lat(),
                    lng: results[0].geometry.location.lng(),
                };
                currentPos = pos;
                geocoder
                    .geocode({ location: pos })
                    .then((response) => {
                        document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                    })
                    .catch((e) => window.alert("Geocoder failed due to: " + e));
                getHostpitals(pos, 1);
            });
        }
    };
</script>
<script>
    /*
    $(document).ready(function () {
        const geocoder = new google.maps.Geocoder();

        $("#hospitalist").hide();
        $("#locatortoolmap").addClass("-maphidden");
        $("#sampleloop2").hide();
        $("#allhospitals").show();
        $("#locatortoollist").addClass("-fullwidth");
        $("#locatortoollist-button").addClass("-seeallbtn");
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                    };
                    geocoder
                        .geocode({ location: pos })
                        .then((response) => {
                            document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                        })
                        .catch((e) => window.alert("Geocoder failed due to: " + e));
                    getHostpitals(pos, 1);
                },
                (error) => {
                    geocoder.geocode({ address: "Bangkok" }, function (results, status) {
                        const pos = {
                            lat: results[0].geometry.location.lat(),
                            lng: results[0].geometry.location.lng(),
                        };
                        geocoder
                            .geocode({ location: pos })
                            .then((response) => {
                                document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                            })
                            .catch((e) => window.alert("Geocoder failed due to: " + e));
                        getHostpitals(pos, 1);
                    });
                },
                {
                    timeout: 10000,
                    maximumAge: 10000,
                    enableHighAccuracy: true,
                }
            );
        } else {
            geocoder.geocode({ address: "Bangkok" }, function (results, status) {
                const pos = {
                    lat: results[0].geometry.location.lat(),
                    lng: results[0].geometry.location.lng(),
                };
                geocoder
                    .geocode({ location: pos })
                    .then((response) => {
                        document.getElementById("current_loc").innerHTML = response.results[0]?.formatted_address;
                    })
                    .catch((e) => window.alert("Geocoder failed due to: " + e));
                getHostpitals(pos, 1);
            });
        }

        $("#btnseemore").hide();
        $("#btnseeall").hide();
        $("#btnseemap").show();

        $(".card__hospital-listing").click(function () {
            // DEMO
        });
        
    });
    */
</script>