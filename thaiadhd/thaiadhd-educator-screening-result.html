<!-- https://dev-thai-adhd.pantheonsite.io/node/64/edit?destination=/admin/content -->

<style>
#thaiadhd-head-result1,
#thaiadhd-head-result2,
#thaiadhd-head-result3,
#thaiadhd-head-result4,
#thaiadhd-head-result5,
#thaiadhd-head-result6,
#thaiadhd-head-result7,
#thaiadhd-head-result8,
#thaiadhd-section1-result1,
#thaiadhd-section1-result2,
#thaiadhd-section2-result1,
#thaiadhd-section2-result2,
#thaiadhd-section3-result1,
#thaiadhd-section3-result2 {
    display: none;
    opacity: 0;
    transform: translateY(6px);
    font-size: 1px;
    transition: all 0.5s ease;
}    
</style>

<div id="thaiadhd-educator-screening-result">
    <!-- HERO -->
    <div class="thaiadhd-hero">
        <div class="thaiadhd-container thaiadhd-welcome">
        <h1>แบบประเมินพฤติกรรม SNAP-IV (สำหรับ คุณครู)</h1>
        <p>Swanson, Nolan and Pelham IV Questionnaire (Short Form)</p>
        <p>แบบประเมินนี้มีไว้สำหรับการประเมินเด็กหรือวัยรุ่นที่อาจมีความเสี่ยงต่อภาวะสมาธิสั้นเท่านั้น และไม่สามารถใช้แทนการวินิจฉัยโรคสมาธิสั้น (ADHD) หรือใช้แทนคำแนะนำทางการแพทย์จากผู้เชี่ยวชาญ หากต้องการคำปรึกษาเพิ่มเติม กรุณาติดต่อบุคลากรทางการแพทย์ในสถานพยาบาลใกล้คุณ</p>
        </div>
    </div>
    <main class="thaiadhd-container">
        <section class="thaiadhd-result">
            <div class="thaiadhd-bar">ผลลัพธ์</div>
            <div class="thaiadhd-head">
                <h1 id="thaiadhd-head-result1">ไม่พบความเสี่ยงโรคสมาธิสั้นตามเกณฑ์แบบประเมิน</h1>
                <h1 id="thaiadhd-head-result2">สงสัยปัญหาด้านอาการขาดสมาธิ</h1>
                <h1 id="thaiadhd-head-result3">สงสัยปัญหาด้านอาการอยู่ไม่นิ่ง/หุนหันพลันแล่น</h1>
                <h1 id="thaiadhd-head-result4">มีความเสี่ยงที่จะเป็นโรคสมาธิสั้นตามเกณฑ์แบบประเมิน</h1>
                <h1 id="thaiadhd-head-result5">สงสัยปัญหาด้านอาการดื้อต่อต้าน</h1>
                <h1 id="thaiadhd-head-result6">สงสัยปัญหาด้านอาการขาดสมาธิและดื้อต่อต้าน</h1>
                <h1 id="thaiadhd-head-result7">สงสัยปัญหาด้านอาการอยู่ไม่นิ่ง/หุนหันพลันแล่นและดื้อต่อต้าน</h1>
                <h1 id="thaiadhd-head-result8">มีความเสี่ยงที่จะเป็นโรคสมาธิสั้นและ<br>อาการดื้อต่อต้านตามเกณฑ์แบบประเมิน</h1>
                <!-- <p>คะแนน: <span id="thaiadhd-head-score">00</span>/78</p> -->
            </div>
            <div class="thaiadhd-body">
                <div class="thaiadhd-item">
                    <b>อาการขาดสมาธิ: <span id="thaiadhd-section1-score">00</span>/27 คะแนน</b>
                    <p id="thaiadhd-section1-result1">คะแนนประเมินต่ำกว่าจุดตัดของการมีอาการ “ขาดสมาธิ”</p>
                    <p id="thaiadhd-section1-result2">คะแนนประเมินสูงกว่าจุดตัดของการมีอาการ “ขาดสมาธิ”<br>
                    <br>
                    แบบประเมินนี้จัดทำขึ้นเพื่อใช้ในการคัดกรองเบื้องต้นสำหรับเด็กที่อาจมีปัญหาด้านอาการขาดสมาธิ โดยมิใช่เครื่องมือสำหรับการวินิจฉัยโรคอย่างเป็นทางการ ผลจากแบบประเมินไม่สามารถใช้แทนการวินิจฉัยทางการแพทย์ได้ โดยท่านสามารถเข้ารับการประเมินเพิ่มเติมจากจิตแพทย์เด็กหรือกุมารแพทย์พัฒนาการเพื่อการวินิจฉัยและดูแลช่วยเหลือที่เหมาะสม
                    </p>
                </div>
                <div class="thaiadhd-item">
                    <b>อาการอยู่ไม่นิ่ง/หุนหันพลันแล่น: <span id="thaiadhd-section2-score">00</span>/27 คะแนน</b>
                    <p id="thaiadhd-section2-result1">คะแนนประเมินต่ำกว่าจุดตัดของการมีอาการ “อยู่ไม่นิ่ง/หุนหันพลันแล่น”</p>
                    <p id="thaiadhd-section2-result2">คะแนนประเมินสูงกว่าจุดตัดของการมีอาการ “อยู่ไม่นิ่ง/หุนหันพลันแล่น"<br>
                    <br>
                    แบบประเมินนี้จัดทำขึ้นเพื่อใช้ในการคัดกรองเบื้องต้นสำหรับเด็กที่อาจมีปัญหาด้านอาการอยู่ไม่นิ่ง/หุนหันพลันแล่น โดยมิใช่เครื่องมือสำหรับการวินิจฉัยโรคอย่างเป็นทางการ ผลจากแบบประเมินไม่สามารถใช้แทนการวินิจฉัยทางการแพทย์ได้ โดยท่านสามารถเข้ารับการประเมินเพิ่มเติมจากจิตแพทย์เด็กหรือกุมารแพทย์พัฒนาการเพื่อการวินิจฉัยและดูแลช่วยเหลือที่เหมาะสมหากท่านมีความกังวลใจเกี่ยวกับพฤติกรรมของบุตรหลาน/นักเรียนของท่าน กรุณาปรึกษาแพทย์ผู้เชี่ยวชาญเพื่อรับคำแนะนำที่เหมาะสม
                    </p>
                </div>
                <div class="thaiadhd-item-last">
                    <b>อาการดื้อต่อด้าน: <span id="thaiadhd-section3-score">00</span>/24 คะแนน</b>
                    <p id="thaiadhd-section3-result1">คะแนนประเมินต่ำกว่าจุดตัดของการมีอาการ “ดื้อต่อต้าน”</p>
                    <p id="thaiadhd-section3-result2">คะแนนประเมินสูงกว่าจุดตัดของการมีอาการ “ดื้อต่อต้าน"<br>
                    <br>
                    แบบประเมินนี้จัดทำขึ้นเพื่อใช้ในการคัดกรองเบื้องต้นสำหรับเด็กที่อาจมีปัญหาด้านอาการดื้อต่อด้าน โดยมิใช่เครื่องมือสำหรับการวินิจฉัยโรคอย่างเป็นทางการ ผลจากแบบประเมินไม่สามารถใช้แทนการวินิจฉัยทางการแพทย์ได้ โดยท่านสามารถเข้ารับการประเมินเพิ่มเติมจากจิตแพทย์เด็กหรือกุมารแพทย์พัฒนาการเพื่อการวินิจฉัยและดูแลช่วยเหลือที่เหมาะสมหากท่านมีความกังวลใจเกี่ยวกับพฤติกรรมของบุตรหลาน/นักเรียนของท่าน กรุณาปรึกษาแพทย์ผู้เชี่ยวชาญเพื่อรับคำแนะนำที่เหมาะสม
                    </p>
                </div>
            </div>
            <div class="thaiadhd-actions">
                <a href="#" id="thaiadhd-savePdfBtn" class="thaiadhd-btn thaiadhd-btn-primary">บันทึกไฟล์ PDF</a>
                <a href="/educator/screening" class="thaiadhd-btn thaiadhd-btn-outline">กลับสู่หน้าแรก</a>
            </div>
        </section>

        <div id="thaiadhd-resultdate-warp">ผลการประเมิน ณ วันที่ <span id="thaiadhd-resultdate">11 กุมภาพันธ์ 2569, 14:10 น.</span></div>

        <div id="thaiadhd-reference">
            <div class="thaiadhd-reference-header">เอกสารอ้างอิงจาก</div>
            <div class="thaiadhd-reference-items">a. Swanson JM, Nolan W, Pelham WE. The SNAP-IV Teacher and Parent Rating Scale. Irvine (CA): University of California, Irvine; 1992.</div>
            <div class="thaiadhd-reference-items">b. ณัทธร พิทยรัตน์เสถียร, ธันวรุจน์ บูรณะสุขสกุล, ดุษฎี จึงศิรกุลวิทย์, ทรงภูมิ เบญญากร. คุณสมบัติของแบบคัดกรองโรคสมาธิสั้นชื่อ Swanson, Nolan, and Pelham IV Scale (SNAP-IV) และ Strengths and Difficulties Questionnaire ส่วนที่เกี่ยวข้องกับพฤติกรรมอยู่ไม่นิ่ง/สมาธิสั้น (SDQ-ADHD) ฉบับภาษาไทย. วารสารสมาคมจิตแพทย์แห่งประเทศไทย. 2557;59(2):97-110.</div>
        </div>
        
    </main>
</div>

<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;600;700;800&display=swap');
:root {
    --thaiadhd-ink: #742c46;
    --thaiadhd-ink-soft: #a34264;
    --thaiadhd-muted: #ecf2f5;
    --thaiadhd-card: #ffffff;
    --thaiadhd-dark-1: #742c46; /* top bar */
    --thaiadhd-dark-2: #a34264; /* headline strip */
    --thaiadhd-accent: #a34264; /* primary button */
    --thaiadhd-outline: #a34264; /* outline stroke color */
    --thaiadhd-btn-ink: #ffffff;
    --thaiadhd-radius: 14px;
    --thaiadhd-container: 1160px;
}
* {
    box-sizing: border-box;
}
html, body {
    font-family: 'Noto Sans Thai', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
}
#thaiadhd-educator-screening-result {
    font-family: 'Noto Sans Thai', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
}
.content>div a:last-of-type {
    display: inherit !important;
}
#thaiadhd-float {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
}
.link-qr-code {
    padding: 10px !important;
    width: auto !important;
    height: 57px !important;
}

/* ----------------------------------------------------
       Page header
---------------------------------------------------- */
.thaiadhd-container {
    max-width: var(--thaiadhd-container);
    margin: 48px auto 72px;
    padding: 0 24px;
}
.thaiadhd-hero {
    padding: 15px 0 15px 0;
    background: #DA5283;
    background: linear-gradient(90deg,rgba(218, 82, 131, 1) 0%, rgba(116, 44, 70, 1) 100%);
}
.thaiadhd-hero .thaiadhd-welcome {
    background: transparent;
    padding: 5px;
    margin: auto !important;
}
.thaiadhd-hero .thaiadhd-welcome h1 {
    margin: 0 0 6px;
    font-weight: 700;
    font-size: 22px;
    letter-spacing: 0.1px;
    color: #fff;
    text-align: left;
    padding: 0px;
    background: transparent;
    border-top: none;
}
.thaiadhd-hero .thaiadhd-welcome p {
    margin: 0;
    opacity: 0.85;
    font-size: 16px;
    color: #fff;
    padding-bottom: 10px;
}
/* ----------------------------------------------------
       Result
---------------------------------------------------- */
.thaiadhd-result {
    border-radius: 16px;
    background: var(--thaiadhd-card);
    overflow: hidden;
    border: 1px solid #e8ecf2;
}
.thaiadhd-bar {
    background: var(--thaiadhd-dark-1);
    color: #fff;
    padding: 16px 24px;
    font-weight: 800;
    font-size: 22px;
}
.thaiadhd-head {
    background: var(--thaiadhd-dark-2);
    color: #fff;
    padding: 28px 32px;
}
.thaiadhd-head h1 {
    margin: 0 0 10px 0;
    font-size: 36px;
    font-weight: 800;
    letter-spacing: 0.2px;
    color: #fff;
    text-align: left;
    padding: 0px;
    background: transparent;
    border-top: none;
}
.thaiadhd-head p {
    margin: 0;
    font-size: 20px;
    font-weight: 700;
    opacity: 0.95;
}
.thaiadhd-body {
    background: var(--thaiadhd-muted);
    padding: 26px 32px 30px;
}
.thaiadhd-item + .thaiadhd-item {
    margin-top: 18px;
}
.thaiadhd-item b {
    font-size: 20px;
    color: #243042;
}
.thaiadhd-item p,
.thaiadhd-item-last p {
    margin: 6px 0 0 0;
    color: #39475c;
    font-size: 18px;
}
.thaiadhd-actions {
    display: flex;
    gap: 22px;
    justify-content: center;
    padding: 26px 24px 34px;
    background: #fff;
}
.thaiadhd-btn {
    border-radius: 999px;
    padding: 16px 32px;
    font-weight: 800;
    font-size: 18px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 260px;
}
.thaiadhd-btn-primary {
    background: var(--thaiadhd-accent);
    color: var(--thaiadhd-btn-ink);
    box-shadow: 0 10px 20px rgba(31, 16, 60, 0.16);
}
.thaiadhd-btn-primary:hover {
    background: #241442;
}
.thaiadhd-btn-outline {
    background: #f7f7fb;
    color: #630425;
    border: 2px solid var(--thaiadhd-outline);
}
.thaiadhd-btn-outline:hover {
    background: #edeef8;
}
.thaiadhd-item {
    border-bottom: 1px solid #ddd;
    padding-bottom: 15px;
    margin-bottom: 25px;
}
#thaiadhd-section1-score,
#thaiadhd-section2-score,
#thaiadhd-section3-score {
    font-weight: bold;
}
#thaiadhd-resultdate-warp {
    padding-top: 20px;
    padding-bottom: 10px;
    text-align: center;
}

/* ----------------------------------------------------
   Academic references (standard look)
---------------------------------------------------- */
#thaiadhd-reference{
  margin-top: 28px;
  padding: 18px;
  background: #ffffff;
  border: 1px solid var(--thaiadhd-border);
  border-left: 5px solid #40506a;
  border-radius: 12px;
}

#thaiadhd-reference .thaiadhd-reference-header{
  font-weight: 800;
  font-size: 16px;
  color: #1f2a3a;
  margin: 0 0 10px 0;
  letter-spacing: 0.2px;
}

#thaiadhd-reference .thaiadhd-reference-items{
  font-size: 14px;
  line-height: 1.6;
  color: #2a3648;
  margin: 8px 0;

  /* Hanging indent: citation style */
  padding-left: 22px;
  text-indent: -22px;

  /* Better wrap for long strings */
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* subtle separation between items */
#thaiadhd-reference .thaiadhd-reference-items + .thaiadhd-reference-items{
  padding-top: 8px;
  border-top: 1px dashed #e6ebf2;
}

@media (max-width: 980px) {
    .thaiadhd-head h1 {
        font-size: 32px;
    }
    .thaiadhd-head p {
        font-size: 18px;
    }
    .thaiadhd-item b {
        font-size: 18px;
    }
    .thaiadhd-item p {
        font-size: 16px;
    }
    .thaiadhd-btn {
        min-width: 220px;
        padding: 14px 26px;
    }
}
@media (max-width: 640px) {
    .thaiadhd-container {
        margin: 28px auto 48px;
        padding: 0 16px;
    }
    .thaiadhd-bar {
        font-size: 20px;
        padding: 14px 18px;
    }
    .thaiadhd-head {
        padding: 22px 20px;
    }
    .thaiadhd-head h1 {
        font-size: 26px;
    }
    .thaiadhd-head p {
        font-size: 16px;
    }
    .thaiadhd-body {
        padding: 18px 20px;
    }
    .thaiadhd-actions {
        flex-direction: column;
        gap: 12px;
        padding: 18px;
    }
    .thaiadhd-btn {
        width: 100%;
    }
}
@media (max-width: 600px) {
    .thaiadhd-hero .thaiadhd-welcome h1 {
        font-size: 20px;
    }
    .thaiadhd-hero .thaiadhd-welcome p {
        font-size: 13.5px;
    }
}

@media (max-width: 520px){
  #thaiadhd-reference{ padding: 16px; }
  #thaiadhd-reference .thaiadhd-reference-items{
    font-size: 13.5px;
    padding-left: 18px;
    text-indent: -18px;
  }
}

/* ------------------------------
   Print (window.print) styling
   /themes/custom/adhdandyou/styles/print.css?tacdvx
------------------------------ */
@media print {
  /* Force background colors/gradients to render in print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  @page {
    margin: 12mm;
  }

  html, body {
    background: #ffffff !important;
  }
  img { filter: none !important; }

  /* Hide site chrome / navigation that Drupal may inject */
  nav, aside,
  .region-header, .region-primary-menu, .region-secondary-menu,
  .tabs, .messages, .toolbar, .admin-toolbar,
  .footer {
    display: none !important;
  }

  /* Hide action buttons on print */
  .thaiadhd-actions,
  #thaiadhd-savePdfBtn {
    display: none !important;
  }

  /* Make layout full width on paper */
  .thaiadhd-container {
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Remove any shadows that look bad in print */
  .thaiadhd-result,
  .thaiadhd-btn {
    box-shadow: none !important;
  }

  /* Keep result card from breaking awkwardly */
  .thaiadhd-result,
  .thaiadhd-head,
  .thaiadhd-body,
  .thaiadhd-item,
  .thaiadhd-item-last {
    break-inside: avoid;
    page-break-inside: avoid;
  }
  .thaiadhd-hero {
    height: 115px !important;
    overflow: hidden !important;
  }
  .thaiadhd-body {
    padding: 15px !important;
    height: 580px !important;
    overflow: hidden !important;
  }

  /* Ensure borders/backgrounds still look clean */
  .thaiadhd-result {
    border: 1px solid #e8ecf2 !important;
  }

  /* Links should not print ugly URLs */
  a[href]:after {
    content: "" !important;
  }
  header .branding {
    display: block !important;
    margin: auto !important;
    text-align: center !important;
  }
  header .branding p {
    text-align: center !important;
  }
  header {
    height: 110px !important;
    overflow: hidden !important;
    display: block !important;
    width: 100% !important;
    padding-left: 10px !important;
    padding-right: 10px !important;
    background-color: #fff !important;
  }
  header > div.wrap {
    display: block !important;
    width: 120px !important;
    overflow: visible !important;
    padding: 0px !important;
  }
  header > div.wrap > div.branding {
    display: block !important;
    padding: 0px !important;
    margin-left: -30px !important;
  }
  .thaiadhd-hero .thaiadhd-welcome p {
    font-size: 11px !important;
  }
  .thaiadhd-bar,
  .thaiadhd-hero .thaiadhd-welcome h1,
  .thaiadhd-head p,
  .thaiadhd-item p, 
  .thaiadhd-item-last p {
    font-size: 14px !important;
  }
  #thaiadhd-head-result1,
  #thaiadhd-head-result2,
  #thaiadhd-head-result3,
  #thaiadhd-head-result4,
  #thaiadhd-head-result5,
  #thaiadhd-head-result6,
  #thaiadhd-head-result7,
  #thaiadhd-head-result8 {
    font-size: 16px !important;
    color: #fff !important;
  }
  .thaiadhd-hero,
  .thaiadhd-hero .thaiadhd-welcome h1,
  .thaiadhd-hero .thaiadhd-welcome p {
    background: #fff !important;
    color: #000 !important;
  }
  #thaiadhd-resultdate-warp,
  #thaiadhd-reference .thaiadhd-reference-header {
    font-size: 14px !important;
  }
  body > div > footer,
  footer {
    background: #fff !important;
    border: none !important;
    padding: 5px !important;
    margin-top: 40px !important;
  }
  #thaiadhd-reference {
    padding: 10px !important;
  }
  #thaiadhd-reference .thaiadhd-reference-items,
  .footertext,
  .pvsession,
  .footerdate {
    font-size: 11px !important;
  }
  #global-footer > p.appcode,
  .appcode {
    text-align: left !important;
  }
}

</style>

<script>
(function () {
  function getIntParam(params, key) {
    // Default to 0 if missing/invalid
    var raw = params.get(key);
    var n = parseInt(raw, 10);
    if (isNaN(n)) return 0;
    // Clamp to expected SNAP-IV range (0..3)
    if (n < 0) n = 0;
    if (n > 3) n = 3;
    return n;
  }

  function sumRange(params, start, end) {
    var total = 0;
    for (var i = start; i <= end; i++) {
      total += getIntParam(params, 'q' + i);
    }
    return total;
  }

  function setText(id, value) {
    var el = document.getElementById(id);
    if (!el) return;
    el.textContent = String(value);
  }

  function init() {
    var params = new URLSearchParams(window.location.search || '');

    // Guard: require exactly 26 SNAP-IV params (q1..q26). If not complete, redirect back.
    var presentCount = 0;
    for (var i = 1; i <= 26; i++) {
      if (params.has('q' + i)) presentCount++;
    }
    if (presentCount !== 26) {
      window.location.href = '/educator/screening';
      return;
    }

    var totalAll = sumRange(params, 1, 26);
    var totalInattentive = sumRange(params, 1, 9);
    var totalHyper = sumRange(params, 10, 18);
    var totalOppositional = sumRange(params, 19, 26);

    setText('thaiadhd-head-score', totalAll);
    setText('thaiadhd-section1-score', totalInattentive);
    setText('thaiadhd-section2-score', totalHyper);
    setText('thaiadhd-section3-score', totalOppositional);

        // -------------------------------------------------
    // Result visibility logic (default hide, then show)
    // -------------------------------------------------
    var IDS_TO_HIDE = [
      'thaiadhd-head-result1',
      'thaiadhd-head-result2',
      'thaiadhd-head-result3',
      'thaiadhd-head-result4',
      'thaiadhd-head-result5',
      'thaiadhd-head-result6',
      'thaiadhd-head-result7',
      'thaiadhd-head-result8',
      'thaiadhd-section1-result1',
      'thaiadhd-section1-result2',
      'thaiadhd-section2-result1',
      'thaiadhd-section2-result2',
      'thaiadhd-section3-result1',
      'thaiadhd-section3-result2'
    ];

    function hideById(id) {
      var el = document.getElementById(id);
      if (!el) return;
      el.style.display = 'none';
      el.style.opacity = '0';
      el.style.transform = 'translateY(6px)';
      // Keep tiny font-size only while hidden to allow a smooth growth on show (mainly for H1)
      if (el.tagName === 'H1') {
        el.style.fontSize = '1px';
      }
    }

    function showById(id) {
      var el = document.getElementById(id);
      if (!el) return;

      // Make it participate in layout first
      el.style.display = 'block';

      // For headline H1 only, animate font-size up to the intended size
      if (el.tagName === 'H1') {
        el.style.fontSize = '36px';
      } else {
        // Let paragraphs keep their CSS-defined font size
        el.style.fontSize = '18px';
      }

      // Smooth reveal (opacity + slight move)
      requestAnimationFrame(function () {
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      });
    }

    // Default: hide all controlled result nodes
    for (var h = 0; h < IDS_TO_HIDE.length; h++) {
      hideById(IDS_TO_HIDE[h]);
    }

    // Section cutoffs from matrix
    // Inattentive (q1-q9): 1-17 = low, 18-27 = high
    // Hyperactive/Impulsive (q10-q18): 1-10 = low, 11-27 = high
    // Oppositional (q19-q26): 1-7 = low, 8-24 = high
    var s1High = totalInattentive >= 18;
    var s2High = totalHyper >= 11;
    var s3High = totalOppositional >= 8;

    // Show per-section text blocks (result1 = low, result2 = high)
    showById(s1High ? 'thaiadhd-section1-result2' : 'thaiadhd-section1-result1');
    showById(s2High ? 'thaiadhd-section2-result2' : 'thaiadhd-section2-result1');
    showById(s3High ? 'thaiadhd-section3-result2' : 'thaiadhd-section3-result1');

    // Headline mapping (8 combinations)
    // 1) s1 low, s2 low, s3 low
    // 2) s1 high, s2 low, s3 low
    // 3) s1 low, s2 high, s3 low
    // 4) s1 high, s2 high, s3 low
    // 5) s1 low, s2 low, s3 high
    // 6) s1 high, s2 low, s3 high
    // 7) s1 low, s2 high, s3 high
    // 8) s1 high, s2 high, s3 high
    var headId = 'thaiadhd-head-result1';
    if (s1High && !s2High && !s3High) headId = 'thaiadhd-head-result2';
    else if (!s1High && s2High && !s3High) headId = 'thaiadhd-head-result3';
    else if (s1High && s2High && !s3High) headId = 'thaiadhd-head-result4';
    else if (!s1High && !s2High && s3High) headId = 'thaiadhd-head-result5';
    else if (s1High && !s2High && s3High) headId = 'thaiadhd-head-result6';
    else if (!s1High && s2High && s3High) headId = 'thaiadhd-head-result7';
    else if (s1High && s2High && s3High) headId = 'thaiadhd-head-result8';

    showById(headId);

    // -------------------------------------------------
    // Result datetime (Thai format) e.g. "11 กุมภาพันธ์ 2569, 14:10 น."
    // -------------------------------------------------
    (function setThaiResultDateTime() {
      var elDate = document.getElementById('thaiadhd-resultdate');
      if (!elDate) return;

      var now = new Date();

      // Thai month names
      var months = [
        'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
        'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
      ];

      var day = now.getDate();
      var monthName = months[now.getMonth()];
      var buddhistYear = now.getFullYear() + 543;

      var hh = String(now.getHours()).padStart(2, '0');
      var mm = String(now.getMinutes()).padStart(2, '0');

      elDate.textContent = day + ' ' + monthName + ' ' + buddhistYear + ', ' + hh + ':' + mm + ' น.';
    })();

    // Expose computed values for future extensions (headlines, conditional text, etc.)
    window.thaiadhdSnapIV = {
      q: function (i) { return getIntParam(params, 'q' + i); },
      totals: {
        all: totalAll,
        inattentive: totalInattentive,
        hyperactiveImpulsive: totalHyper,
        oppositional: totalOppositional
      }
    };
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<script>
(function () {
  function onReady(fn) {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', fn);
    } else {
      fn();
    }
  }

  onReady(function () {
    var btn = document.getElementById('thaiadhd-savePdfBtn');
    if (!btn) return;

    btn.addEventListener('click', function (e) {
      e.preventDefault();

      // Give the browser one frame to finish any last layout changes.
      requestAnimationFrame(function () {
        window.print();
      });
    });
    window.addEventListener('afterprint', function () {
      // no-op for now (placeholder)
    });
  });
})();
</script>
